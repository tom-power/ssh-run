#compdef sshRun

_hosts() {
  compadd $(~/bin/sshRun hosts)
}

_scripts() {
  host=${words[2]}
  compadd $(~/bin/sshRun $host scripts | grep -v 'explain')
}

_arguments -s \
  '1:hosts:_hosts' \
  '2:scriptsAndExplainHost:_scripts' \
  '3:explainScript:->explainScript'

if [[ $state == 'explainScript' && ${line[2]} != "explain" ]]; then
  _arguments '3:explain:(explain)'
fi
